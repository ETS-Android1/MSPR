
> api-rest@0.0.0 test C:\Users\leade\Documents\Cours Informatique\cours_epsi\MSPR\api-rest
> mocha 'test/**/*.js' --recursive --full-trace --color --timeout 60000 --exit


[0m[0m
[0m  check promoDto integrity[0m
  [32m  âˆš[0m[90m should return true if promo date is valid[0m
  [32m  âˆš[0m[90m should return false if promo date is not valid[0m

[0m  checks routes for client[0m
[34m âš¡  Connection has been established successfully. âš¡
[34m âš¡  Connection has been established successfully. âš¡
[0mGET /clients/1 [32m200 [0m48.391 ms - 366[0m
  [32m  âˆš[0m[90m should send a response with code 200 and the right client in payload if he exists in db[0m[31m (80ms)[0m
[0mGET /clients/10000 [33m404 [0m5.245 ms - 28[0m
  [32m  âˆš[0m[90m should send a response with code 404 and error in payload if he doesnt exist in db[0m
[0mGET /clients/crocodile [33m400 [0m1.185 ms - 23[0m
  [32m  âˆš[0m[90m should send a response with code 400 and error in payload if id is not a number[0m

[0m  checks routes for login[0m
[0mPOST /login/ [32m200 [0m147.922 ms - 366[0m
  [32m  âˆš[0m[90m should send a response with code 200 and the right client in payload if credentials are ok[0m[31m (153ms)[0m
[0mPOST /login/ [33m400 [0m0.557 ms - 26[0m
  [32m  âˆš[0m[90m should send a response with code 400 and error in payload if there is missing parameter[0m
[0mPOST /login/ [33m403 [0m4.447 ms - 37[0m
  [32m  âˆš[0m[90m should send a response with code 403 and error in payload if email doesn't exist[0m
[0mPOST /login/ [33m403 [0m145.608 ms - 37[0m
  [32m  âˆš[0m[90m should send a response with code 404 and error in payload if password doesn't match a right email[0m[31m (150ms)[0m

[0m  checks routes for promos[0m
[0mGET /promos/1 [32m200 [0m10.038 ms - 130[0m
  [32m  âˆš[0m[90m should send a response with code 200 and the right promo in payload if it exists in db[0m
[0mGET /promos/10000 [33m404 [0m8.016 ms - 27[0m
  [32m  âˆš[0m[90m should send a response with code 404 and error in payload if he doesnt exist in db[0m
[0mGET /promos/crocodile [33m400 [0m0.723 ms - 23[0m
  [32m  âˆš[0m[90m should send a response with code 400 and error in payload if id is not a number[0m
[0mPOST /promos/1/2 [32m201 [0m27.181 ms - 130[0m
  [32m  âˆš[0m[90m should send a response with code 201 and one the good promo in payload[0m

[0m  check clientDto integrity[0m
  [32m  âˆš[0m[90m should init clientDto with promoDto from clientDao with a promo[0m
  [32m  âˆš[0m[90m should init clientDto with no promoDto from clientDao with no promo[0m


[92m [0m[32m 15 passing[0m[90m (733ms)[0m

